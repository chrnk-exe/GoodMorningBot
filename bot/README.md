# Документация к боту

В начале этого документа лежат уже написанные функции и их описание
Описание функции состоит из:
- Входных параметров функции
- Возвращаемое значение
- Примечания (словесное описание функции)

## Файлы:
- main.py - входная точка приложения
- models.py - модели для БД SQLAlchemy, создание соединения
- vk_session.py - файл с VK сессией
- lib.py - функции, вынесенные в отдельный файл для удобной работы бота в main.py
- requirements.txt - зависимости
- services - маленькие функции с говорящими названиями, созданные для работы с БД

### Файл *main.py*

Не содержит отдельных функций\
Есть пути ответов бота:
- 'sub'/'Подписаться на рассылку' - добавляет пользователя в рассылку (mailing_list)
- 'unsub'/'Отписаться от рассылки' - убирает пользователя с user_id из mailing_list
- 'about'/'Об авторе' - ссылка на нас)
- 'add'/'Добавить видео' - Просит прислать видео
- 'send'/'Разослать' - делает рассылку всем пользователям (требует прав администратора)
- 'добавить админа' - после слов 'добавить админа' должен следовать id нового админа
- 'удалить админа' - аналогично верхнему, только удаляет администратора
- '1000-7' - 993
- 'test' - присылает тестовое видео
- \* - Заглушка

### Файл [*models.py*](/bot/db.md)

### Файл *lib.py*

get_button(button: dict) -> button dict
- button - {'text': str, 'color': 'positive' | 'negative' | 'secondary' | 'primary'}
- Объект кнопки с заданным текстом и цветом

write_msg(user_id: int, message: str, keyboard: dict, attachment: str) -> None
- user_id - id пользователя в вк, message - текст сообщения, keyboard - клавиатура, для пользователя, attachment - вложения
  (ID видео)

get_keyboard_arr(item: list | button dict) -> buttons list
- item: 1 или более объектов {text, color}
- button dict[]

configure_keyboard(user_id)
Создаёт клавиатуру в зависимости от текущего пользователя

get_attach_content_user(arr, content) -> list
- arr - словарь со списком вложений, content - необходимые вложения которые надо вернуть
- возвращает вложения в нужном формате 